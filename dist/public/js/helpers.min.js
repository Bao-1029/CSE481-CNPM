export const createElement=(nodeName,attrs)=>{attrs={eventsInline:!1,...attrs};const elem=document.createElement(nodeName);if(attrs&&"object"==typeof attrs)for(const attr in attrs)switch(attr){case"node":elem.appendChild(attrs[attr]);break;case"nodes":attrs[attr].forEach((function(i){elem.appendChild(i)}));break;case"html":elem.insertAdjacentHTML("beforeend",attrs[attr]);break;case"htmls":attrs[attr].forEach((function(i){elem.insertAdjacentHTML("beforeend",i)}));break;case"text":elem.textContent=attrs[attr];break;case"props":for(const p in attrs[attr])elem[p]=attrs[attr][p];break;case"events":const events=attrs[attr];if(attrs.eventsInline)for(const e in events)elem.addEventListener(`on${e}`,events[e]);else for(const e in events)elem.addEventListener(e,events[e]);break;case"eventsInline":break;default:elem.setAttribute(attr,attrs[attr])}return elem};export const createGroupItem=function(nodeName,attrs,arrayData,handlerEachData){return createElement(nodeName,{...attrs,nodes:arrayData.map(item=>handlerEachData(item))})};export const subStr=(str,breakChar,fromStart=!0,includeBreakChar=!1)=>{const i=str.indexOf(breakChar);return-1!=i?fromStart?str.substring(0,includeBreakChar?i+1:i):str.substring(includeBreakChar?i:i+1):void 0};export const utf8Decode=function(utf8String){if("string"!=typeof utf8String)throw new TypeError("parameter ‘utf8String’ is not a string");const unicodeString=utf8String.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,(function(c){var cc=(15&c.charCodeAt(0))<<12|(63&c.charCodeAt(1))<<6|63&c.charCodeAt(2);return String.fromCharCode(cc)})).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,(function(c){var cc=(31&c.charCodeAt(0))<<6|63&c.charCodeAt(1);return String.fromCharCode(cc)}));return unicodeString};export const getLastestId=(arr,searchString,specificId)=>{const s=arr.filter(x=>x.includes(searchString)).sort();return 0==s.length?+subStr(s[s.length-1],specificId,!1):0};export const mandatory=()=>{throw new Error("Misssing parameter")};export const summaryArrayObj=function(json=mandatory(),key=mandatory(),config=mandatory()){const result={};if(json.forEach(item=>{const k=item[key];!result[k]&&(result[k]={}),config.props.forEach(prop=>{!result[k][prop]&&(result[k][prop]=[]),result[k][prop].push(item[prop])})}),config.sum)for(const key in result)config.sum.forEach(item=>{result[key][item]=result[key][item].reduce((total,crr)=>total+crr,0)});return result};export const totalizeObjs=function(data=mandatory(),keys){const result={};keys.map(k=>result[k]=0);for(const key in data){const d=data[key];keys.map(k=>{result[k]+=d[k]})}return result};export const flattenObject=function(obj,prefix=""){return Object.keys(obj).reduce((acc,k)=>{const pre=prefix.length?prefix+".":"";return"object"==typeof obj[k]?Object.assign(acc,flattenObject(obj[k],pre+k)):acc[pre+k]=obj[k],acc},{})};export const deepMapKeys=function(obj,fn){Array.isArray(obj)?obj.map(val=>deepMapKeys(val,fn)):"object"==typeof obj&&Object.keys(obj).reduce((acc,current)=>{const key=fn(current),val=obj[current];return acc[key]=null!==val&&"object"==typeof val?deepMapKeys(val,fn):val,acc},{})};export const mapKeys=function(obj,fn){Object.keys(obj).reduce((acc,k)=>(acc[fn(obj[k],k,obj)]=obj[k],acc),{})};export const findKey=(obj,fn)=>Object.keys(obj).find(key=>fn(obj[key],key,obj));export const sendData=function(input,init){return fetch(input,init).then(response=>(500==response.status?alert(`Check your internet connection\nerror code: ${response.status}`):response.error&&alert(response.error),response.text())).then(text=>alert(text)).catch(err=>console.log("Request failed",err))};export const getData=function(input,init){return fetch(input,init).then(response=>(response.ok||alert(`${response.statusText}\nError code: ${response.status}`),response.json())).then(json=>json.data).catch(err=>console.log("Request failed",err))};export const getClosest=function(elem,selector){for(;elem&&elem!==document;elem=elem.parentNode)if(elem.matches(selector))return elem;return null};export const childrenMatches=function(elem,selector){return Array.prototype.filter.call(elem.children,(function(child){return child.matches(selector)}))};export const childOfClosest=function(elem,parentSelector,selector){const parent=getClosest(elem,parentSelector);return parent.querySelector(selector)};export const childrentOfClosest=function(elem,parentSelector,selector){const parent=getClosest(elem,parentSelector);return childrenMatches(parent,selector)};export const filterElements=function(parentNode,childTag){const input=event.target.value.toUpperCase(),item=parentNode.getElementsByTagName(childTag);for(let i=0;i<item.length;i++){const txtValue=item[i].textContent;txtValue.toUpperCase().indexOf(input)>-1?item[i].style.display="":item[i].style.display="none"}};export const scrollToTop=(smoothness=8)=>{const y=document.documentElement.scrollTop||document.body.scrollTop;y>0&&(window.requestAnimationFrame(scrollToTop),window.scrollTo(0,y-y/smoothness))};